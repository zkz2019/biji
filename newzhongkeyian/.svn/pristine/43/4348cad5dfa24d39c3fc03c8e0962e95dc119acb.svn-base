<!-- 楼层效果弹出框 -->
<template>
  <el-dialog
    class="effect-classify"
    :close-on-click-modal="false"
    :before-close="beforeClose"
    :visible.sync="dialogVisible"
    width="80%"
    :title="'分组布局调整 （'+title+'）'"
  >
    <el-tabs class="classify-tabs" v-model="activeName" @tab-click="handleClick">
      <el-tab-pane v-for="(li, key) of tabs" :key="key" :label="li.label" :name="key + ''"></el-tab-pane>
    </el-tabs>
    <component
      v-if="dialogVisible"
      :title="title"
      @beforeClose="beforeClose"
      @onRefresh="onRefresh"
      :param="param"
      :is="compon"
    ></component>
  </el-dialog>
</template>

<script>
import room from "./classify-room";
import classify from "./classify-classify";
export default {
  name: "effect-classify",
  props: {
    title: String,
    param: Object,
    dialogVisible: Boolean
  },
  data() {
    return {
      activeName: "0",
      tabs: [
        { label: "房间", compon: room },
        { label: "分组", compon: classify }
      ],
      compon: room
    };
  },
  created() {},
  mounted() {
    document.body.ondrop = function(event) {
      event.preventDefault();
      event.stopPropagation();
    };
  },
  methods: {
    handleClick() {
      this.compon = this.tabs[this.activeName].compon;
    },
    onRefresh(key) {
      this.$emit("onRefresh", key);
    },
    beforeClose() {
      this.$emit("beforeClose");
    }
  }
};
</script>
<style lang='scss'>
.effect-classify {
  .el-dialog__body {
    position: relative;
    padding-top: 0;
  }
  .classify-tabs {
    position: absolute;
    top: 0;
    left: 24px;
  }
}
</style>