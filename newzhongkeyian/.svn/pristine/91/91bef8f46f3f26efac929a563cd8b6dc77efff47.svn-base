(window["webpackJsonp"]=window["webpackJsonp"]||[]).push([["chunk-11658084"],{"02ba":function(e,t,i){},1088:function(e,t,i){},2487:function(e,t,i){},"362d":function(e,t,i){"use strict";i.r(t);var o=function(){var e=this,t=e.$createElement,i=e._self._c||t;return i("div",{staticClass:"libox"},[i("el-container",{staticClass:"el-containerbox"},[i("el-aside",{staticClass:"leftbox",staticStyle:{"background-color":"rgb(238, 241, 246)"},attrs:{width:"210px"}},[i("trees",{ref:"trees_Component",attrs:{TreeURL:"/system/build/1/getbuild",Props:e.Props,addbuildingbutid:e.addbuildingbutid},on:{handleNodeClick:e.handleNodeClick}})],1),i("el-container",{staticClass:"mins"},[i("el-header",{staticClass:"elheader"},[i("div",{staticClass:"titlebox"},[e._v(e._s(e.fatheragid.buildlocation)+"(区域编号"+e._s(e.fatheragid.buildcode)+")")]),i("div",{staticClass:"heads rights"},[1==e.fatheragid.buildtype||3==e.fatheragid.buildtype?i("el-select",{staticClass:"inputs",attrs:{"value-key":"value"},model:{value:e.searchtype,callback:function(t){e.searchtype=t},expression:"searchtype"}},[i("el-option",{attrs:{label:"显示全部",value:"0"}}),i("el-option",{attrs:{disabled:3==e.fatheragid.buildtype,label:"仅区域类型建筑",value:"1"}}),i("el-option",{attrs:{disabled:3==e.fatheragid.buildtype,label:"仅楼栋类型建筑",value:"2"}}),i("el-option",{attrs:{disabled:1==e.fatheragid.buildtype,label:"门禁",value:"3"}}),i("el-option",{attrs:{disabled:1==e.fatheragid.buildtype,label:"除门禁",value:"4"}})],1):e._e()],1)]),i("el-main",[i("Pub-Tabel",{attrs:{tableloading:e.tableloading,buttoms:e.buttoms,selection:!0,is_indx:!0,gridData:e.gridData,total_kp:e.total_kp,page_kp:e.page_kp,rows_kp:e.rows_kp,is_pagination:!0},on:{dialoghandleSize:e.dialoghandleSize,dialoghandleCurrent:e.dialoghandleCurrent,scecountclick:e.scecountclick,select:e.select,selectall:e.selectall}})],1),i("el-footer",{staticClass:"elfooter"},[e.glybut?i("el-button",{attrs:{type:"primary",size:"small"},nativeOn:{click:function(t){return e.buttonclick_glybut(t)}}},[e._v("管理员")]):e._e(),e._l(e.foortbuts,function(t,o){return[i("el-button",{key:t.entity.id,attrs:{type:"primary",size:"small"},nativeOn:{click:function(i){e.buttonclick(t.entity.id,i)}}},[e._v(e._s(t.entity.alias))])]})],2),i("dialog27",{attrs:{dialogFormVisible:e.dialogFormVisible,buildinginfo:e.fatheragid,title:e.fatheragid.buildlocation||e.fatheragid.buildname||"",bus:e.bus},on:{handleDialogClose:e.setdialogFormVisible}}),i("addbuilding",{attrs:{dialogFormVisible:e.addbuildingVisible,buildinginfo:e.fatheragid,butid:e.addbuildingbutid},on:{handleDialogClose:e.addbuildingVisibleClose,refresh:e.refresh}}),i("modification",{attrs:{dialogFormVisible:e.modificationVisible,buildinginfo:e.fatheragid,butid:e.addbuildingbutid},on:{handleDialogClose:e.modificationVisibleClose}})],1)],1)],1)},l=[],a=i("a4bb"),n=i.n(a),s=i("f499"),c=i.n(s),r=i("d4e7"),u=function(){var e=this,t=e.$createElement,i=e._self._c||t;return i("div",{staticStyle:{height:"100%"}},[i("el-table",{directives:[{name:"loading",rawName:"v-loading",value:e.tableloading,expression:"tableloading"}],ref:"tables",staticStyle:{width:"100%"},attrs:{data:e.gridData,border:"",height:"93%","row-class-name":e.tableRowClassName,"row-style":e.selectedHighlight},on:{"row-click":e.openDetails,"selection-change":e.handleSelectionChange,select:e.select,"select-all":e.selectall}},[e.selection?i("el-table-column",{attrs:{type:"selection",width:"40"}}):e._e(),e.is_indx?i("el-table-column",{attrs:{label:"序号","show-overflow-tooltip":!0,width:"80"},scopedSlots:e._u([{key:"default",fn:function(t){return[i("span",[e._v(e._s(t.$index+(1*e.page_kp-1)*(1*e.rows_kp)+1)+" ")])]}}])}):e._e(),i("el-table-column",{attrs:{"show-overflow-tooltip":!0,prop:"buildtype",label:"下级建筑类型"},scopedSlots:e._u([{key:"default",fn:function(t){return[i("span",[e._v(e._s(e.is_buildtype(t.row.buildtype)))])]}}])}),i("el-table-column",{attrs:{"show-overflow-tooltip":!0,prop:"buildcode",label:"下级区域编号"}}),i("el-table-column",{attrs:{"show-overflow-tooltip":!0,prop:"buildname",label:"下级区域名称"}}),i("el-table-column",{attrs:{"show-overflow-tooltip":!0,prop:"agtype",label:"区域类型"},scopedSlots:e._u([{key:"default",fn:function(t){return[i("span",[e._v(e._s(e.is_agtype(t.row.agtype)))])]}}])}),i("el-table-column",{attrs:{label:"操作",width:"250"},scopedSlots:e._u([{key:"default",fn:function(t){return e._l(e.buttomsbj,function(o){return i("span",{key:o.entity.id,staticClass:"bjbox",on:{click:function(i){i.stopPropagation(),e.scecountclick(o.entity.id,t.row)}}},[258==o.entity.id?i("i",{staticClass:"el-icon-upload2"}):259==o.entity.id?i("i",{staticClass:"el-icon-download"}):30==o.entity.id?i("i",{staticClass:"el-icon-edit-outline"}):29==o.entity.id?i("i",{staticClass:"el-icon-plus"}):32==o.entity.id?i("i",{staticClass:"el-icon-delete"}):e._e()])})}}])})],1),e.is_pagination?i("el-pagination",{attrs:{"current-page":e.currentPage1,background:"","page-sizes":[15,20,30,40,50],"page-size":e.rows_kp,layout:"total, sizes, prev, pager, next, jumper",total:e.total_kp},on:{"size-change":e.handleSizeChange,"current-change":e.handleCurrentChange}}):e._e()],1)},d=[],g=(i("cadf"),i("551c"),i("097d"),{props:["gridData","rows_kp","page_kp","total_kp","cols","is_searchbox","selection","tableloading","selectdata","is_select","butsload","checkedload","is_pagination","is_indx","buttoms"],data:function(){return{getIndex:"",currentPage1:1,input21:"",iscardchecked:!1,isfingerchecked:!1,selectvalue:"",this_row:{}}},computed:{buttomsbj:function(){var e=this.buttoms;return e.length>0?[e[7],e[6],e[2],e[4],e[3]]:[]}},watch:{selectvalue:function(e){this.$emit("selectvalue",e)}},mounted:function(){},methods:{is_agtype:function(e){return"1"==e?"宿舍区域":"2"==e?"公共区域":"3"==e?"随房间属性":void 0},is_buildtype:function(e){return"1"==e?"园区":"2"==e?"楼栋":"3"==e?"楼层":"4"==e?"房间":"5"==e?"楼梯":"6"==e?"装饰间":"7"==e?"门禁":void 0},scecountclick:function(e,t){this.$emit("scecountclick",e,t)},selectall:function(e){this.$emit("selectall",e)},selectedHighlight:function(e){e.row;var t=e.rowIndex;if(this.getIndex===t)return{"background-color":"#CAE1FF"}},tableRowClassName:function(e){var t=e.row,i=e.rowIndex;t.index=i},handleSelectionChange:function(e){this.$emit("handleSelectionChange",e)},select:function(e,t){this.$emit("select",e,t,this.$refs)},openDetails:function(e,t){this.getIndex=e.index,this.$emit("openDetails",e)},handleSizeChange:function(e){this.$emit("dialoghandleSize",e)},handleCurrentChange:function(e){this.$emit("dialoghandleCurrent",e)}}}),h=g,b=(i("ad03"),i("2877")),f=Object(b["a"])(h,u,d,!1,null,"5774e8f1",null);f.options.__file="PubTabel.vue";var p=f.exports,m=function(){var e=this,t=e.$createElement,i=e._self._c||t;return i("el-dialog",{staticClass:"dialog27box",attrs:{title:e.title,visible:e.dialogFormVisible,"close-on-click-modal":!1,"before-close":e.handleDialogClose,width:"1100px"},on:{"update:visible":function(t){e.dialogFormVisible=t}}},[i("el-container",{staticStyle:{height:"400px"}},[e.bus.length>=2?i("el-aside",{staticClass:"asidebox",staticStyle:{"background-color":"rgb(238, 241, 246)"},attrs:{width:"200px"}},[i("el-input",{attrs:{placeholder:"输入账号或姓名搜索"},model:{value:e.search_pk,callback:function(t){e.search_pk=t},expression:"search_pk"}}),[i("el-table",{directives:[{name:"loading",rawName:"v-loading",value:e.loadingtable,expression:"loadingtable"}],staticStyle:{width:"100%"},attrs:{"highlight-current-row":!0,height:"83%",data:e.gridData},on:{"row-click":e.rowclick}},[i("el-table-column",{attrs:{prop:"userlogin","show-overflow-tooltip":!0,label:"账号"}}),i("el-table-column",{attrs:{prop:"username","show-overflow-tooltip":!0,label:"姓名"}})],1),i("el-pagination",{attrs:{small:"","pager-count":5,"current-page":e.page_pk,"page-size":e.rows_pk,layout:"total, prev, next",total:e.total_pk},on:{"current-change":e.handleCurrentChange,"update:currentPage":function(t){e.page_pk=t}}})]],2):e._e(),i("el-container",{staticStyle:{border:"1px solid #ccc"}},[i("Pubtabel",{attrs:{gridData:e.gridData_selected_sumup,tableloading:e.tableloading,is_pagination:!0,is_handleClick:!0,no_redact:!0,is_indx:!0,rows_kp:e.rows_gly,page_kp:e.page_gly,total_kp:e.gridData_selected_total_kp},on:{handleClick:e.handleClick,select:e.select,selectall:e.selectall,dialoghandleCurrent:e.dialoghandleCurrent_pages,dialoghandleSize:e.dialoghandleSize_pages}})],1)],1),i("div",{staticClass:"dialog-footer",attrs:{slot:"footer"},slot:"footer"},[e._l(e.bus,function(t){return[i("el-button",{key:t.entity.id,attrs:{type:"primary",size:"medium"},on:{click:function(i){e.busclick(t.entity.id)}}},[e._v(e._s(t.entity.alias))])]})],2)],1)},v=[],y=i("a78e"),_=i.n(y),k=function(){var e=this,t=e.$createElement,i=e._self._c||t;return i("div",{staticStyle:{height:"100%",width:"100%"}},[i("el-table",{directives:[{name:"loading",rawName:"v-loading",value:e.tableloading,expression:"tableloading"}],ref:"tables",staticStyle:{width:"100%"},attrs:{data:e.gridData,border:"",height:"91%","row-class-name":e.tableRowClassName,"row-style":e.selectedHighlight},on:{"row-click":e.openDetails,"selection-change":e.handleSelectionChange,select:e.select,"select-all":e.selectall}},[i("el-table-column",{attrs:{type:"selection",width:"40"}}),e.is_indx?i("el-table-column",{attrs:{label:"序号","show-overflow-tooltip":!0,width:"60",align:"center"},scopedSlots:e._u([{key:"default",fn:function(t){return[i("span",[e._v(e._s(t.$index+(e.page_kp-1)*e.rows_kp+1)+" ")])]}}])}):e._e(),i("el-table-column",{attrs:{label:"管理员账号",prop:"userlogin","show-overflow-tooltip":!0}}),i("el-table-column",{attrs:{label:"姓名",prop:"username","show-overflow-tooltip":!0}}),i("el-table-column",{attrs:{label:"账号角色",prop:"userrole","show-overflow-tooltip":!0}}),i("el-table-column",{attrs:{label:"授权账号",prop:"userlogin2","show-overflow-tooltip":!0}}),i("el-table-column",{attrs:{label:"授权生效时间",prop:"agmdate",width:"200","show-overflow-tooltip":!0}})],1),e.is_pagination?i("el-pagination",{attrs:{"current-page":e.currentPage1,background:"","page-sizes":[15,20,30,40,50],"page-size":e.rows_kp,layout:"total, sizes, prev, pager, next, jumper",total:e.total_kp},on:{"size-change":e.handleSizeChange,"current-change":e.handleCurrentChange}}):e._e()],1)},w=[],C={props:["gridData","rows_kp","total_kp","cols","is_searchbox","selection","tableloading","selectdata","is_select","butsload","checkedload","is_pagination","is_indx","is_handleClick","no_redact","page_kp"],data:function(){return{getIndex:"",currentPage1:1,input21:"",iscardchecked:!1,isfingerchecked:!1,selectvalue:"",this_row:{}}},watch:{selectvalue:function(e){this.$emit("selectvalue",e)}},mounted:function(){},methods:{deleteClick:function(e){this.$emit("deleteClick",e)},handleClick:function(e){this.$emit("handleClick",e)},scecountclick:function(e){this.$emit("scecountclick",e)},selectall:function(e){this.$emit("selectall",e)},selectedHighlight:function(e){e.row;var t=e.rowIndex;if(this.getIndex===t)return{"background-color":"#CAE1FF"}},tableRowClassName:function(e){var t=e.row,i=e.rowIndex;t.index=i},handleSelectionChange:function(e){this.$emit("handleSelectionChange",e)},select:function(e,t){this.$emit("select",e,t,this.$refs)},openDetails:function(e,t){this.getIndex=e.index,this.$emit("openDetails",e)},handleSizeChange:function(e){this.$emit("dialoghandleSize",e)},handleCurrentChange:function(e){this.$emit("dialoghandleCurrent",e)}}},x=C,$=(i("b2fc"),Object(b["a"])(x,k,w,!1,null,"4f074d96",null));$.options.__file="PubTabeldx.vue";var S=$.exports,D={props:["dialogFormVisible","buildinginfo","title","bus"],components:{Pubtabel:S},data:function(){return{aggregation:[],gridData:[],rowpersonnel:{},page_pk:1,rows_pk:15,total_pk:0,search_pk:"",loadingtable:!1,tableloading:!1,gridData_selected_sumup:[],gridData_selected_total_kp:0,page_gly:1,rows_gly:15}},methods:{selectall:function(e){console.log(e),this.aggregation=e},select:function(e,t){console.log(e,t),this.aggregation=e},busclick:function(e){var t=this;if(console.log(e),29==e){if(0==n()(this.rowpersonnel).length)return void this.$message({message:"请先选中左侧人员",type:"warning"});this.savefatheruser()}else if(33==e){if(0==this.aggregation.length)return void this.$message({message:"请先选中管理员",type:"warning"});this.$confirm("是否删除选中的管理员?","提示",{confirmButtonText:"确定",cancelButtonText:"取消",type:"warning"}).then(function(){t.delareamanager()})}},dialoghandleSize_pages:function(e){console.log(e),this.rows_gly=e,this.getfatherareamanager()},dialoghandleCurrent_pages:function(e){console.log(e),this.page_gly=e,this.getfatherareamanager()},handleClick:function(e){console.log(e)},handleCurrentChange:function(e){},rowclick:function(e){console.log(e),this.rowpersonnel=e},delareamanager:function(){var e=this,t=_.a.get("token");this.$post("/system/build/deletemanager/1/delareamanager?token=".concat(t),this.aggregation,"1").then(function(t){console.log(t.result),e.$message({message:"成功删除该管理员",type:"success"}),e.getfatherareamanager()}).catch(function(t){console.log(t),e.$message.error(t.resultMsg||"连接失败")})},savefatheruser:function(){var e=this,t=_.a.get("token"),i="/system/build/savemanager/5/savefatheruser";this.buildinginfo.hasOwnProperty("sequence")&&(i="/system/build/savemanager/5/savenextuser"),this.$post("".concat(i,"?token=").concat(t,"&userlogin=").concat(this.rowpersonnel.userlogin),this.buildinginfo,"1").then(function(t){console.log(t.result),e.$message({message:"成功添加管理员",type:"success"}),e.getfatherareamanager()}).catch(function(t){console.log(t),e.$message.error(t.resultMsg||"连接失败")})},handleDialogClose:function(){this.$emit("handleDialogClose")},getfatheruser:function(){var e=this;this.loadingtable=!0;var t=_.a.get("token"),i="/system/build/savemanager/3/getfatheruser";this.buildinginfo.hasOwnProperty("sequence")&&(i="/system/build/savemanager/4/getnextuser"),this.$post("".concat(i,"?token=").concat(t,"&page=").concat(this.page_pk,"&rows=").concat(this.rows_pk,"&search=").concat(this.search_pk),this.buildinginfo,"1").then(function(t){console.log(t.result),e.gridData=t.result.data,e.total_pk=1*t.result.total,e.loadingtable=!1}).catch(function(t){console.log(t),e.loadingtable=!1})},getfatherareamanager:function(){var e=this;this.tableloading=!0;var t=_.a.get("token"),i="/system/build/savemanager/1/getfatherareamanager";this.buildinginfo.hasOwnProperty("sequence")&&(i="/system/build/savemanager/2/getnextareamanager"),this.$post("".concat(i,"?token=").concat(t,"&page=").concat(this.page_gly,"&rows=").concat(this.rows_gly),this.buildinginfo,"1").then(function(t){console.log(t.result),e.gridData_selected_sumup=t.result.data,e.gridData_selected_total_kp=1*t.result.total,e.tableloading=!1}).catch(function(t){console.log(t),e.tableloading=!1})}},mounted:function(){},computed:{},watch:{dialogFormVisible:function(e){e&&(this.search_pk="",this.getfatherareamanager())},search_pk:function(e){""!=e&&this.getfatheruser()}}},V=D,z=(i("c8e9"),i("6729"),Object(b["a"])(V,m,v,!1,null,"4d9681d6",null));z.options.__file="dialog27.vue";var P=z.exports,F=function(){var e=this,t=e.$createElement,i=e._self._c||t;return i("div",[i("el-dialog",{staticClass:"dialog27box",attrs:{title:e.title,visible:e.dialogFormVisible,"close-on-click-modal":!1,"before-close":e.handleDialogClose,width:"800px"},on:{"update:visible":function(t){e.dialogFormVisible=t}}},[i("el-container",{staticStyle:{height:"400px"}},[197==e.butid?i("el-aside",{staticClass:"asidebox",staticStyle:{"background-color":"rgb(238, 241, 246)",border:"1px solid #ccc"},attrs:{width:"200px"}},[i("trees",{attrs:{TreeURL:"/system/build/1/getbuild",Props:e.Props},on:{handleNodeClick:e.handleNodeClick}})],1):e._e(),i("el-container",{staticStyle:{border:"1px solid #ccc"}},[i("div",{staticClass:"frombox"},[i("el-form",{attrs:{"label-position":e.labelPosition,"label-width":"105px"}},[28==e.butid&&1==e.buildinginfo.buildtype||197==e.butid&&1==e.buildinginfo.buildtype?i("el-form-item",{attrs:{label:"建筑类型:"}},[i("el-select",{staticClass:"inputs",attrs:{clearable:"",placeholder:"请选择"},model:{value:e.value4,callback:function(t){e.value4=t},expression:"value4"}},e._l(e.options,function(e){return i("el-option",{key:e.value,attrs:{label:e.label,value:e.value}})}),1)],1):e._e(),28==e.butid&&3==e.buildinginfo.buildtype?i("el-form-item",{attrs:{label:"房间类型:"}},[i("el-select",{staticClass:"inputs",attrs:{clearable:"",placeholder:"请选择"},model:{value:e.roomtype,callback:function(t){e.roomtype=t},expression:"roomtype"}},e._l(e.options_fj,function(e){return i("el-option",{key:e.value,attrs:{label:e.label,value:e.value}})}),1)],1):e._e(),i("el-form-item",{attrs:{label:"建筑编号:"}},[i("el-input",{staticClass:"inputs",model:{value:e.form.agcode,callback:function(t){e.$set(e.form,"agcode",t)},expression:"form.agcode"}})],1),i("el-form-item",{attrs:{label:"建筑名称:"}},[i("el-input",{staticClass:"inputs",model:{value:e.form.agname,callback:function(t){e.$set(e.form,"agname",t)},expression:"form.agname"}})],1),28!=e.butid||1!=e.buildinginfo.buildtype&&2!=e.buildinginfo.buildtype&&0!=e.buildinginfo.buildtype?e._e():i("el-form-item",{attrs:{label:"房间属性:"}},[i("el-select",{staticClass:"inputs",attrs:{clearable:"",placeholder:"请选择"},model:{value:e.value5,callback:function(t){e.value5=t},expression:"value5"}},e._l(e.options_sx,function(e){return i("el-option",{key:e.id,attrs:{label:e.name,value:e.id}})}),1)],1),197==e.butid?i("el-form-item",{attrs:{label:"是否包含设备:"}},[i("el-select",{staticClass:"inputs",attrs:{clearable:"",placeholder:"请选择"},model:{value:e.bhsb,callback:function(t){e.bhsb=t},expression:"bhsb"}},[i("el-option",{attrs:{label:"是",value:"1"}}),i("el-option",{attrs:{label:"否",value:"2"}})],1)],1):e._e()],1)],1)])],1),i("div",{staticClass:"dialog-footer",attrs:{slot:"footer"},slot:"footer"},[28==e.butid?i("el-button",{attrs:{type:"primary",size:"medium"},on:{click:e.addbuilding}},[e._v("新增建筑")]):e._e(),197==e.butid?i("el-button",{attrs:{type:"primary",size:"medium"},on:{click:e.copyaddbuilding}},[e._v("复制新增建筑")]):e._e()],1)],1)],1)},T=[],N={components:{trees:r["a"]},props:["dialogFormVisible","butid","buildinginfo"],data:function(){return{bhsb:"1",roomtype:"",title:"",labelPosition:"right",options_fj:[{value:"4",label:"房间"},{value:"5",label:"楼梯"},{value:"6",label:"装饰间"},{value:"7",label:"门禁"}],value5:"",options_sx:[],options:[{value:"1",label:"园区"},{value:"2",label:"楼栋"}],value4:"1",form:{agcode:"",agname:""},fatheragid:{},Props:{children:"children",label:"buildname",isLeaf:function(e,t){var i=JSON.parse(c()(e));return 1==i.isnext?i.isnext=!1:i.isnext=!0,i.isnext}}}},computed:{subset:function(){if(this.dialogFormVisible)return!this.buildinginfo.hasOwnProperty("sequence")}},mounted:function(){},watch:{dialogFormVisible:function(e){e&&(console.log(this.butid),1==this.buildinginfo.buildtype&&28==this.butid?this.title="新增区域建筑":2==this.buildinginfo.buildtype&&28==this.butid?this.title="新增下级建筑":3==this.buildinginfo.buildtype&&28==this.butid?this.title="新增房间":0==this.buildinginfo.buildtype&&28==this.butid?this.title="新增顶级建筑":this.title="复制新增建筑",this.getareacode())},value4:function(e){this.getareacode()}},methods:{addbuilding:function(){3==this.buildinginfo.buildtype?this.xzfj():this.xzjz()},xzfj:function(){var e=this,t=_.a.get("token");console.log(this.form.agcode),console.log(this.form.agname),console.log(this.value5),console.log(this.value4),console.log(this.buildinginfo.buildid);var i="/system/build/save/2/savearea";this.$post("".concat(i,"?token=").concat(t,"&roomcode=").concat(this.form.agcode,"&roomname=").concat(this.form.agname,"&areatype=").concat(this.roomtype,"&buildtype=").concat(this.value4,"\n          &buildid=").concat(this.buildinginfo.buildid)).then(function(t){console.log(t.result),e.$message({message:"新增房间成功",type:"success"}),e.handleDialogClose(),e.refresh()}).catch(function(t){console.log(t),e.$message({showClose:!0,message:t.resultMsg||"连接失败",type:"warning"})})},xzjz:function(){var e=this,t=_.a.get("token"),i=this.value4;1!=this.buildinginfo.buildtype&&(i=""),console.log(this.form.agcode),console.log(this.form.agname),console.log(this.value5),console.log(this.buildinginfo),console.log(i);var o="/system/build/save/2/savearea";this.$post("".concat(o,"?token=").concat(t,"&agcode=").concat(this.form.agcode,"&agname=").concat(this.form.agname,"&areatype=").concat(this.value5,"&buildtype=").concat(i),this.buildinginfo,"1").then(function(t){console.log(t.result),e.$message({message:"新增建筑成功",type:"success"}),e.handleDialogClose(),e.refresh()}).catch(function(t){console.log(t),e.$message({showClose:!0,message:t.resultMsg||"连接失败",type:"warning"})})},refresh:function(){this.$emit("refresh")},copyaddbuilding:function(){var e=this,t=_.a.get("token");if(0!=this.fatheragid.buildtype){var i="";0==this.buildinginfo.buildtype?i="/system/build/copy/1/savecopytopbuild?token=".concat(t,"&buildcode=").concat(this.form.agcode,"&buildname=").concat(this.form.agname,"&isroom=").concat(this.bhsb):1==this.buildinginfo.buildtype?i="/system/build/copy/2/savecopybuild?token=".concat(t,"&buildcode=").concat(this.form.agcode,"&buildname=").concat(this.form.agname,"&isroom=").concat(this.bhsb,"&buildid=").concat(this.buildinginfo.buildid,"&buildtype=").concat(this.value4):2==this.buildinginfo.buildtype&&(i="/system/build/copy/3/savecopyfloor?token=".concat(t,"&buildcode=").concat(this.form.agcode,"&buildname=").concat(this.form.agname,"&isroom=").concat(this.bhsb,"&buildid=").concat(this.buildinginfo.buildid)),this.$post("".concat(i),this.fatheragid,"1").then(function(t){console.log(t.result),e.$message({message:"复制新增建筑成功",type:"success"}),e.handleDialogClose(),e.refresh()}).catch(function(t){console.log(t),e.$message({showClose:!0,message:t.resultMsg||"连接失败",type:"warning"})})}else this.$message({showClose:!0,message:"建筑列表不可复制",type:"warning"})},getareacode:function(){var e=this,t=_.a.get("token");this.value4;n()(this.buildinginfo).length;var i="/system/build/save/1/getareacode";this.$post("".concat(i,"?token=").concat(t,"&buildtype=").concat(this.value4),this.buildinginfo,"1").then(function(t){console.log(t.result),e.options_sx=t.result.areatypes,e.form.agcode=t.result.agcode,e.form.agname=t.result.agname}).catch(function(e){console.log(e)})},handleDialogClose:function(){this.$emit("handleDialogClose"),this.form.agcode="",this.form.agname="",this.value5="",this.value4="1",this.roomtype="",this.fatheragid={}},handleNodeClick:function(e){console.log(e),this.fatheragid=e,1==e.buildtype?this.value4="1":2==e.buildtype&&(this.value4="2")}}},j=N,O=(i("9d82"),Object(b["a"])(j,F,T,!1,null,"07949c0c",null));O.options.__file="addbuilding.vue";var B=O.exports,I=function(){var e=this,t=e.$createElement,i=e._self._c||t;return i("div",[i("el-dialog",{attrs:{title:"修改建筑",visible:e.dialogFormVisible,"close-on-click-modal":!1,"before-close":e.handleDialogClose,width:"500px"},on:{"update:visible":function(t){e.dialogFormVisible=t}}},[i("el-form",{staticClass:"formbox",attrs:{model:e.form,"label-width":"120px"}},[e.is_multiple?e._e():i("el-form-item",{attrs:{label:"建筑编号"}},[i("el-input",{staticClass:"inputs",attrs:{autocomplete:"off"},model:{value:e.form.buildcode,callback:function(t){e.$set(e.form,"buildcode",t)},expression:"form.buildcode"}})],1),e.is_multiple?e._e():i("el-form-item",{attrs:{label:"建筑名称"}},[i("el-input",{staticClass:"inputs",attrs:{autocomplete:"off"},model:{value:e.form.buildname,callback:function(t){e.$set(e.form,"buildname",t)},expression:"form.buildname"}})],1),i("el-form-item",{attrs:{label:"房间属性"}},[i("el-select",{staticClass:"inputs",attrs:{"value-key":"value"},model:{value:e.region,callback:function(t){e.region=t},expression:"region"}},[i("el-option",{attrs:{label:"宿舍区域",value:"1"}}),i("el-option",{attrs:{label:"公共区域",value:"2"}}),i("el-option",{attrs:{disabled:e.is_build,label:"随房间属性",value:"3"}})],1)],1),e.is_room?i("el-form-item",{attrs:{label:"房间类型"}},[i("el-select",{staticClass:"inputs",attrs:{"value-key":"value"},model:{value:e.roomtype,callback:function(t){e.roomtype=t},expression:"roomtype"}},[i("el-option",{attrs:{label:"房间",value:"4"}}),i("el-option",{attrs:{label:"楼梯",value:"5"}}),i("el-option",{attrs:{label:"装饰间",value:"6"}}),i("el-option",{attrs:{label:"门禁",value:"7"}})],1)],1):e._e()],1),i("div",{staticClass:"dialog-footer",attrs:{slot:"footer"},slot:"footer"},[i("el-button",{attrs:{type:"primary"},on:{click:e.determine}},[e._v("确 定")])],1)],1)],1)},M=[],E={props:["dialogFormVisible","buildinginfo"],data:function(){return{is_room:!1,is_build:!1,is_multiple:!1,form:{buildcode:"",buildname:""},region:"1",roomtype:"4"}},watch:{dialogFormVisible:function(e){console.log(this.buildinginfo),e&&(4==this.buildinginfo.buildtype?(this.is_room=!0,this.region=this.buildinginfo.agtype+""):(this.is_build=!0,this.region=this.buildinginfo.buildtype2+""),this.form.buildcode=this.buildinginfo.buildcode,this.form.buildname=this.buildinginfo.buildname)}},components:{},computed:{},mounted:function(){},methods:{determine:function(){4==this.buildinginfo.buildtype?this.updatenextbuild():this.updatebuild()},handleDialogClose:function(){this.$emit("handleDialogClose"),is_room=!1,is_build=!1,is_multiple=!1,this.form={buildcode:"",buildname:""},this.region=1,this.roomtype=4},updatebuild:function(){var e=this,t=_.a.get("token"),i=JSON.parse(c()(this.buildinginfo));i.buildcode=this.form.buildcode,i.buildname=this.form.buildname,i.buildtype2=this.region,this.$post("/system/build/update/2/updatebuild?token=".concat(t),i,"1").then(function(t){console.log(t.result),e.$message({message:"修改建筑成功",type:"success"})}).catch(function(t){console.log(t),e.$message.error(t.resultMsg||"连接失败")})},updatenextbuild:function(){var e=this,t=_.a.get("token"),i=JSON.parse(c()(this.buildinginfo));i.buildcode=this.form.buildcode,i.buildname=this.form.buildname,i.agtype=this.region,i.buildtype=this.roomtype,this.$post("/system/build/update/3/updatenextbuild?token=".concat(t),i,"1").then(function(t){console.log(t.result),e.$message({message:"修改房间成功",type:"success"})}).catch(function(t){console.log(t),e.$message.error(t.resultMsg||"连接失败")})}}},R=E,L=(i("cbe1"),Object(b["a"])(R,I,M,!1,null,"6d67ebe6",null));L.options.__file="modification.vue";var J=L.exports,A=(i("fa7d"),{components:{trees:r["a"],PubTabel:p,dialog27:P,addbuilding:B,modification:J},data:function(){return{Selectedinformation:[],modificationinfo:{},modificationVisible:!1,addbuildingbutid:"",dialogFormVisible:!1,tableloading:!1,addbuildingVisible:!1,pagesid:27,bus:[],fatheragid:{},fatheragid_xj:{},gridData:[],foortbuts:[],total_kp:0,searchtype:"0",rows_kp:15,page_kp:1,buttoms:[],glybut:!1,Props:{children:"children",label:"buildname",isLeaf:function(e,t){var i=JSON.parse(c()(e));return 1==i.isnext?i.isnext=!1:i.isnext=!0,i.isnext}}}},computed:{},mounted:function(){this.getsonmenu(),this.getnextbuild()},methods:{select:function(e){console.log(e),this.Selectedinformation=e},selectall:function(e){console.log(e),this.Selectedinformation=e},modificationVisibleClose:function(){console.log("关闭11"),this.modificationVisible=!1,console.log(this.modificationVisible)},refresh:function(){this.$refs.trees_Component.Therefresh(),console.log(this.$refs.trees_Component)},addbuildingVisibleClose:function(){this.addbuildingVisible=!1},setdialogFormVisible:function(){this.dialogFormVisible=!1},buttonclick:function(e){var t=this;if(console.log(e),28==e){if(0==n()(this.fatheragid).length)return void this.$message({showClose:!0,message:"请先选中左侧区域",type:"warning"});this.addbuildingVisible=!0,this.addbuildingbutid=e}else if(197==e){if(0==n()(this.fatheragid).length)return void this.$message({showClose:!0,message:"请先选中左侧区域",type:"warning"});if(3==this.fatheragid.buildtype)return void this.$message({showClose:!0,message:"只能选择层以上建筑",type:"warning"});this.addbuildingVisible=!0,this.addbuildingbutid=e}else if(30==e){if(0==n()(this.fatheragid).length)return void this.$message({showClose:!0,message:"请先选中左侧区域",type:"warning"});this.modificationVisible=!0,this.addbuildingbutid=e}else if(32==e){if(console.log(this.Selectedinformation),0==this.Selectedinformation.length)return void this.$message({showClose:!0,message:"请选中要删除的建筑",type:"warning"});this.$confirm("此操作将批量删除选中建筑, 是否继续?","提示",{confirmButtonText:"确定",cancelButtonText:"取消",type:"warning"}).then(function(){t.updatebuild()})}},updatebuild:function(){var e=this,t=_.a.get("token");this.$post("/system/build/delete/2/delbuilds?token=".concat(t),this.Selectedinformation,"1").then(function(t){console.log(t.result),e.$message({message:"删除建筑成功",type:"success"}),e.getnextbuild()}).catch(function(t){console.log(t),e.$message.error(t.resultMsg||"连接失败")})},buttonclick_glybut:function(){0!=n()(this.fatheragid).length&&0!=this.fatheragid.buildtype?this.dialogFormVisible=!0:this.$message({showClose:!0,message:"请先选中区域",type:"warning"})},scecountclick:function(e,t){var i=this;console.log(e,t),29==e?(this.dialogFormVisible=!0,this.fatheragid=t):30==e?(this.modificationVisible=!0,this.fatheragid=t):32==e?this.$confirm("此操作将删除该建筑, 是否继续?","提示",{confirmButtonText:"确定",cancelButtonText:"取消",type:"warning"}).then(function(){var e=_.a.get("token");i.$post("/system/build/delete/1/delbuild?token=".concat(e),t,"1").then(function(e){console.log(e.result),i.$message({message:"删除建筑成功",type:"success"}),i.getnextbuild()}).catch(function(e){console.log(e),i.$message.error(e.resultMsg||"连接失败")})}):259==e?this.$confirm("此操作将此房间下移一位, 是否继续?","提示",{confirmButtonText:"确定",cancelButtonText:"取消",type:"warning"}).then(function(){i.updatebuildposition(t,2)}):258==e&&this.$confirm("此操作将此房间上移一位, 是否继续?","提示",{confirmButtonText:"确定",cancelButtonText:"取消",type:"warning"}).then(function(){i.updatebuildposition(t,1)})},updatebuildposition:function(e,t){var i=this,o=_.a.get("token");console.log(e),this.$post("/system/build/update/1/updatebuildposition?token=".concat(o,"&movetype=").concat(t),e,"1").then(function(e){console.log(e.result),i.$message({message:"移动建筑成功",type:"success"}),i.getnextbuild()}).catch(function(e){console.log(e),i.$message.error(e.resultMsg||"连接失败")})},dialoghandleCurrent:function(e){this.page_kp=e,this.getnextbuild()},dialoghandleSize:function(e){this.rows_kp=e,this.getnextbuild()},handleNodeClick:function(e){console.log(e),this.fatheragid=e,this.getnextbuild()},getsonmenu:function(){var e=this,t=_.a.get("token");this.$post("/login/home/2/getsonmenu",{token:t,fatherid:this.pagesid}).then(function(t){console.log(t.result),e.buttoms=t.result;var i=[],o=[];t.result.map(function(t){29!=t.entity.id&&33!=t.entity.id||(e.glybut=!0,o.push(t)),28!=t.entity.id&&197!=t.entity.id&&30!=t.entity.id&&32!=t.entity.id||i.push(t),e.foortbuts=i,e.bus=o})}).catch(function(e){console.log(e)})},getnextbuild:function(){var e=this;this.tableloading=!0;var t=_.a.get("token");this.$post("/system/build/2/getnextbuild?token=".concat(t,"&page=").concat(this.page_kp,"&rows=").concat(this.rows_kp,"&searchtype=").concat(this.searchtype),this.fatheragid,"1").then(function(t){console.log(t.result),e.gridData=t.result.data,e.total_kp=1*t.result.total,e.tableloading=!1}).catch(function(t){console.log(t),e.tableloading=!1})}},watch:{searchtype:function(e){console.log(e),this.getnextbuild()}}}),q=A,H=(i("7f2e1"),Object(b["a"])(q,o,l,!1,null,"e19813d0",null));H.options.__file="jzgl27.vue";t["default"]=H.exports},"4fb6":function(e,t,i){},"571e":function(e,t,i){},6729:function(e,t,i){"use strict";var o=i("82c4"),l=i.n(o);l.a},"7f2e1":function(e,t,i){"use strict";var o=i("571e"),l=i.n(o);l.a},"82c4":function(e,t,i){},"9d82":function(e,t,i){"use strict";var o=i("1088"),l=i.n(o);l.a},ad03:function(e,t,i){"use strict";var o=i("f778"),l=i.n(o);l.a},b2fc:function(e,t,i){"use strict";var o=i("2487"),l=i.n(o);l.a},c8e9:function(e,t,i){"use strict";var o=i("02ba"),l=i.n(o);l.a},caf5:function(e,t,i){"use strict";var o=i("4fb6"),l=i.n(o);l.a},cbe1:function(e,t,i){"use strict";var o=i("d901"),l=i.n(o);l.a},d4e7:function(e,t,i){"use strict";var o=function(){var e=this,t=e.$createElement,i=e._self._c||t;return i("div",{staticClass:"box"},[i("el-tree",{staticClass:"treebox",attrs:{data:e.treedatas,props:e.defaultProps,"render-after-expand":"","highlight-current":!0,load:e.loadNode1,lazy:"","node-key":"buildid","default-expanded-keys":e.idArr},on:{"node-click":e.handleNodeClick}})],1)},l=[],a=i("a4bb"),n=i.n(a),s=(i("fa7d"),i("a78e")),c=i.n(s),r=(i("2f62"),{props:["pagesid","TreeURL","Props","addbuildingbutid"],data:function(){return{pagesids:this.pagesid,thistab:"",treedatas:[],idArr:[],defaultProps:this.is_defaultProps()}},methods:{is_defaultProps:function(){return"undefined"!=typeof this.Props?this.Props:{children:"children",label:"agname",isLeaf:"isnext"}},handleNodeClick:function(e){this.$emit("handleNodeClick",e)},Therefresh:function(){this.getTreeData()},getTreeData:function(){var e=this,t=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{},i=arguments.length>1?arguments[1]:void 0,o=c.a.get("token");this.$post("".concat(this.TreeURL,"?token=").concat(o),t,"1").then(function(o){if(console.log(o.result),0!=n()(t).length)return i(o.result);e.treedatas=o.result,e.idArr.push(o.result[0].buildid)}).catch(function(e){console.log(e)})},loadNode1:function(e,t){if(0!=e.level){var i=e.data;this.getTreeData(i,t)}}},mounted:function(){this.getTreeData()},watch:{pagesid:function(e){this.pagesids=e}}}),u=r,d=(i("caf5"),i("2877")),g=Object(d["a"])(u,o,l,!1,null,"3a652c92",null);g.options.__file="PubTree2.vue";t["a"]=g.exports},d901:function(e,t,i){},f778:function(e,t,i){}}]);
//# sourceMappingURL=chunk-11658084.3dd268c0.js.map