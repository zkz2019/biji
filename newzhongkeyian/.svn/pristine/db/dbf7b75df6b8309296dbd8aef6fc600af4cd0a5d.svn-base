<template>
  <fel-container-batch noRetrie>
    <template slot="title">
      <span class="navig" type="text" @click="onReturn">批量授权</span>
      <i class="arrow"></i>批量授权人脸数据
    </template>
    <template slot="left">
      <div class="tsTop">步骤1：选择待授人脸数据</div>
      <div class="b-center">
        <div class="b-query">
          <el-select
            size="mini"
            class="left-select"
            @change="onLeftChange"
            v-model="leftParam.type"
            placeholder="请选择"
          >
            <el-option
              v-for="item of options"
              :key="item.value"
              :label="item.label"
              :value="item.value"
            ></el-option>
          </el-select>
          <template v-if="leftParam.type == 1">
            <search-select
              @change="onChange"
              class="condition"
              noClick
              interface="/person/2/getperson"
            >
              <!-- <template v-slot:options="options" v-slot:text="loadText">
                <div class="select-tips" v-show="!options || options.length==0">{{loadText}}</div>
                <div class="select-list" v-show="options && options.length>0">
                  <div
                    class="fel-select_sel_item"
                    v-for="(item,key) of options"
                    :key="key"
                    @click.stop="onClick(item)"
                  >
                    <div class="text">{{item.personname}}</div>
                    <div class="text">{{item.personcode}}</div>
                  </div>
                </div>
              </template>-->
            </search-select>
          </template>
          <template v-else>
            <el-cascader
              class="condition"
              size="mini"
              v-model="leftParam.colid"
              :options="zzoptions"
              :props="{ checkStrictly: true ,value:'pgid',label:'pgname' }"
              clearable
            ></el-cascader>
            <!-- @change="zzOnchange" -->
          </template>
          <el-button class="box_top_rightBtn" @click="onClick" size="mini" type="primary">查询</el-button>
        </div>
        <div class="b-center2">
          <template v-if="leftParam.type == 1">
            <fel-table :queryData="queryData" :list="list">
              <div class="full-list">待授权卡片列表</div>
            </fel-table>
          </template>
          <template v-else>
            <paging-table
              interface="/auth/cardcenter/lotauth/7/getcard2"
              layout=" prev, pager, next"
              noInit
              :list="list"
            >
              <div class="full-list">待授权卡片列表</div>
            </paging-table>
          </template>
        </div>
      </div>
    </template>
    <template>
      <div class="tsTop">步骤2：选择位置</div>
      <div class="b-center">
        <div class="box_top">
          <el-button class="box_top_rightBtn" @click="onClick" size="mini" type="primary">确认选择</el-button>
        </div>
        <div class="b-center2 b-tree">
          <fel-tree1
            class="tree1"
            ref="tree1"
            interface="/auth/cardcenter/lotauth/2/getbuildtree"
            @checkchange="checkchange"
            :idArr="[0]"
          ></fel-tree1>
        </div>
      </div>
    </template>
    <template slot="right">
      <div class="tsTop">步骤3：批量生成授权</div>
      <div class="b-center">
        <paging-table
          noInit
          height="100%"
          ref="paging-table"
          interface="/auth/cardcenter/lotauth/9/getcardauthpage2"
          :list="list"
          :refresh="refresh"
        >
          <!-- <el-button
              v-for="(v,k) of topButs"
              type="text"
              :disabled="thridDisabled"
              :key="k"
              class="mar0-10"
              @click="onClick(v.id, v)"
            >
              <i v-if="v.icon" :class="'ficon-'+v.icon"></i>
              {{v.alias}}
          </el-button>-->
        </paging-table>
      </div>
    </template>
  </fel-container-batch>
</template>

<script>
export default {
  data() {
    let $this = this;
    return {
      param: {},
      zzoptions: [],
      list: [],
      refresh: 0,
      queryData: [],
      leftParam: {
        type: "1"
      },
      options: [
        { value: "1", label: "人员" },
        { value: "2", label: "组织" }
      ]
    };
  },
  methods: {
    onChange() {},
    onClick() {},
    onLeftChange() {},
    onEjectChange() {},
    onReturn() {
      this.$emit("onReturn");
    },
    checkchange() {}
  }
};
</script>

<style lang="scss">
.b-center {
  padding: 8px;
  background-color: #fff;
  flex: 1;
  display: flex;
  flex-direction: column;
  .b-query {
    display: flex;
    align-items: center;
    .left-select {
      width: 80px;
      margin-right: 10px;
    }
    .condition {
      flex: 1;
    }
    .box_top_rightBtn {
      height: 26px;
      margin-left: 10px;
    }
  }
  .b-center2 {
    flex: 1;
    display: flex;
    flex-direction: column;
  }
  .b-tree {
    position: relative;
    .fel-tree {
      position: absolute;
      top: 0;
      right: 0;
      bottom: 0;
      left: 0;
      overflow: auto;
    }
  }
  .fel-tables {
    flex: 1;
  }
}
</style>