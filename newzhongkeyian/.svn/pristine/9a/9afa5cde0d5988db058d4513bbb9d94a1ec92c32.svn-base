<!-- 人员信息 -->
<template>
  <fel-dialog
    class="ipMacCfjc"
    top="5%"
    title="ip/mac地址重复检测"
    width="85%"
    append-to-body
    min-width="900px"
    :close-on-click-modal="false"
    :before-close="beforeClose"
    :visible.sync="dialogVisible"
  >
    <el-tabs v-model="activeName" @tab-click="handleClick">
      <el-tab-pane label="ip重复网关" name="first">
        <div v-if="ip&&ip.length==0" class="config_null">暂无数据</div>
        <fel-table
          v-else
          class="tobleList wh100"
          height="100%"
          style="min-height: 300px;"
          :list="list"
          :queryData="ip"
          @onRefresh="onRefresh"
        ></fel-table>
      </el-tab-pane>
      <el-tab-pane class="tabs" label="mac重复网关" name="second">
        <div v-if="ip&&ip.length==0" class="config_null">暂无数据</div>
        <fel-table
          v-else
          class="tobleList wh100"
          :list="list"
          style="min-height: 300px;"
          height="100%"
          :queryData="mac"
          @onRefresh="onRefresh"
        ></fel-table>
      </el-tab-pane>
    </el-tabs>
  </fel-dialog>
</template>

<script>
export default {
  props: {
    dialogVisible: Boolean,
  },
  data() {
    return {
      activeName: "first",
      //   queryData: {
      ip: [],
      mac: [],
      //   },
      list: [
        {
          name: "通讯ID",
          prop: "gatewaycode",
        },
        {
          name: "唯一ID",
          prop: "gatewaycode2",
        },
        {
          name: "ip",
          prop: "gatewayip",
        },
        {
          name: "位置",
          prop: "gatewaylocation",
        },
        {
          name: "mac",
          prop: "gatewaymac",
        },
      ],
    };
  },
  created() {
    this.getList();
  },
  methods: {
    beforeClose() {
      this.$emit("beforeClose");
    },
    onRefresh() {
      this.getList();
    },
    handleClick(val) {
      console.log("val", val);
    },
    getList() {
      this.$ajax("/system/device/gateway/5/checkIpAndMac", {}, "9")
        .then((res) => {
          this.ip = res.result.ips;
          this.mac = res.result.macs;
          console.log("this.queryData", this.mac);
          console.log("res", res);
        })
        .catch((err) => {
          console.log("err", err);
        });
    },
  },
};
</script>

<style lang="scss">
.ipMacCfjc {
  .config_null {
    height: 300px;
    line-height: 300px;
    text-align: center;
  }
}
</style>
