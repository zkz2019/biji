<!--  当前状态 -->
<template>
  <div :key="key" class="currentState">
    <form-table thwidth="10%" tdwidth="40%" :column="2" :param="defaultData" :list="tableData"></form-table>
    <Participants :rrid="defaultData.rrid" :dialogVisible="dialogVisible" @Close="Close" />
    <lockDoor :dialogVisible="lDdialogVisible" :checkedroom="checkedroom" @Close="lDClose" />
  </div>
</template>

<script>
import lockDoor from "./dialog/lockDoor";
import Participants from "./dialog/Participants";
import inpbox from "./../../common/inpbox";
export default {
  props: {
    checkedroom: Object
  },
  components: {
    inpbox,
    Participants,
    lockDoor
  },
  data() {
    var $this = this;
    return {
      dialogVisible: false,
      lDdialogVisible: false,
      key: 0,
      defaultData: {},
      tableData: [
        {
          name: "房间名称",
          value: "roomname"
        },
        {
          name: "房间类型",
          value: "roomnexttypename"
        },
        {
          name: "房间管理员",
          //   value: "closeperson"
          render(obj, add) {
            return add(
              "a",
              {
                class: "el-tooptip_btn",
                on: {
                  click: function(event) {
                    $this.lDdialogVisible = true;
                    //   obj.dates = event;
                  }
                }
              },
              obj.closeperson
            );
          }
        },
        {
          name: "管理员电话",
          value: "personmobile"
        },
        {
          name: "房间开放时间",
          value: "opentime"
        }
        // {
        //   name: "当前使用人",
        //   // value: "useperson"
        //   render(obj, add) {
        //     return add(
        //       "el-tooltip",
        //       {
        //         class: "item",
        //         props: {
        //           effect: "dark",
        //           content: `电话:${obj.personmobile},组织:${
        //             obj.personlocation
        //           }`,
        //           placement: "right-start"
        //         },
        //         on: {
        //           click: function(event) {
        //             // $this.lDdialogVisible = true;
        //             //   obj.dates = event;
        //           }
        //         }
        //       },
        //       [add("span", { class: "" }, obj.useperson)]
        //     );
        //   }
        // },
        // {
        //   name: "事由",
        //   value: "rrbei"
        // },
        // {
        //   name: "联系电话",
        //   value: "personmobile"
        // },
        // {
        //   name: "使用人组织",
        //   value: "personlocation"
        // },
        // {
        //   name: "使用时间段",
        //   value: "usetime"
        // },
        // {
        //   name: "参与人员",
        //   //   value: "rrpersons"
        //   render(obj, add) {
        //     if(obj.rrpersons!="无"){
        //       return add(
        //         "a",
        //         {
        //           class: "el-tooptip_btn",
        //           on: {
        //             click: function(event) {
        //               $this.dialogVisible = true;
        //             }
        //           }
        //         },
        //         obj.rrpersons
        //       );
        //     }else{
        //          return add(
        //         "span",
        //         {
        //         },
        //         obj.rrpersons
        //       );
        //     }
        //   }
        // }
      ]
    };
  },
  computed: {
    roomid() {
      return this.$store.state.fj38.checkedroom.roomid + "";
    }
  },
  created() {
    this.$ajax(
      "/lock/operate/publicroom/1/getpublicroomstatus",
      { roomid: this.checkedroom.roomid },
      "1"
    ).then(res => {
      this.defaultData = res.result;
    });
  },
  methods: {
    lDClose() {
      this.lDdialogVisible = false;
    },
    Close() {
      this.dialogVisible = false;
    },
    Determine() {}
  }
};
</script>
