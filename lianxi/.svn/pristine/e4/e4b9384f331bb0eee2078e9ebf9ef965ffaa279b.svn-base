<template>
  <!-- 状态信息 -->
  <div class="con_rowt clearfloat">
    <div class="rowt_left">
      <div v-if="states1" class="rowt_box">
        <div class="wgbox">
          <div class="ztleft">
            <h5>
              服务器状态
              <!-- content="Right Bottom 提示文字" -->
              <i class="ficon-dian2"></i>
              <div
                class="tooltipBox"
              >在线状态: {{this.chartdata3.on_line}} ({{Math.ceil(this.chartdata3.on_line/this.chartdata3.total_line*100)}}%)</div>
            </h5>
            <ul>
              <li>
                总数:
                <span class="ftotal">{{this.chartdata3.total_line}}</span>
                <!-- <i>台</i> -->
              </li>
              <li>
                正常:
                <span class="ftotal">{{this.chartdata3.on_line}}</span>
                <!-- <i>台</i> -->
              </li>
              <li>
                宕机:
                <span class="puc-px">{{this.chartdata3.off_line}}</span>
                <!-- >台</! -->
              </li>
            </ul>
          </div>
          <div class="ztright">
            <div id="id3" class="divs" :style="{width: '100%', height: '100%'}" @click="toFwq"></div>
          </div>
        </div>
        <div class="spbox">
          <span class="lxsp2 befo">离线</span>
          <span class="zxsp2 befo">在线</span>
        </div>
      </div>
      <div v-if="states2" class="rowt_box">
        <div class="wgbox">
          <div class="ztleft">
            <h5>
              网关状态
              <i class="ficon-dian2"></i>
              <div
                class="tooltipBox"
              >在线状态: {{this.chartdata1.on_line}} ({{Math.ceil(this.chartdata1.on_line/this.chartdata1.total_line*100)}}%)</div>
            </h5>
            <ul>
              <li>
                总数:
                <span class="wtotal">{{this.chartdata1.total_line}}</span>
                <!-- <i>台</i> -->
              </li>
              <li>
                在线:
                <span class="wtotal">{{this.chartdata1.on_line}}</span>
                <!-- <i>台</i> -->
              </li>
              <li>
                离线:
                <span class="puc-px">{{this.chartdata1.off_line}}</span>
                <!-- <i>台</i> -->
              </li>
            </ul>
          </div>
          <div class="ztright">
            <div
              id="id1"
              class="divs"
              :style="{width: '100%', height: '100%'}"
              @click="onDetailed(1)"
            ></div>
          </div>
        </div>
        <div class="spbox">
          <span class="lxsp befo">离线</span>
          <span class="zxsp befo">在线</span>
        </div>
      </div>
      <div v-if="states3" class="rowt_box">
        <div class="wgbox">
          <div class="ztleft">
            <h5>
              门锁状态
              <i class="ficon-dian2"></i>
              <div
                class="tooltipBox"
              >在线状态: {{this.chartdata2.on_line}} ({{Math.ceil(this.chartdata2.on_line/this.chartdata2.total_line*100)}}%)</div>
            </h5>
            <ul>
              <li>
                总数:
                <span class="mtotal">{{this.chartdata2.total_line}}</span>
                <!-- <i>把</i> -->
              </li>
              <li>
                在线:
                <span class="mtotal">{{this.chartdata2.on_line}}</span>
                <!-- <i>把</i> -->
              </li>
              <li>
                离线:
                <span class="puc-px">{{this.chartdata2.off_line}}</span>
                <!-- <i>把</i> -->
              </li>
            </ul>
          </div>
          <div class="ztright">
            <div
              id="id2"
              class="divs"
              :style="{width: '100%', height: '100%'}"
              @click="onDetailed(2)"
            ></div>
          </div>
        </div>
        <div class="spbox">
          <span class="lxsp1 befo">离线</span>
          <span class="zxsp1 befo">在线</span>
        </div>
      </div>
    </div>
    <div class="rowt_right">
      <div v-if="states5" class="msgbox">
        <h5>
          房间信息
          <div class="msgbox_before"></div>
          <div class="msgbox_after"></div>
        </h5>
        <ul>
          <li>
            <div>{{getRoomtype2s[1]||"宿舍房间"}}:</div>
            <div>{{this.roominfo.roomcount}}</div>
          </li>
          <li>
            <div>{{getRoomtype2s[2]||"公共房间"}}:</div>
            <div>{{this.roominfo.classcount}}</div>
          </li>
          <li>
            <div>门禁门闸:</div>
            <div>{{this.roominfo.labcount}}</div>
          </li>
          <li>
            <div>其他房间:</div>
            <div>{{this.roominfo.othercount}}</div>
          </li>
        </ul>
      </div>
      <div v-if="states4" class="msgbox">
        <h5>
          人员信息
          <div class="msgbox_before"></div>
          <div class="msgbox_after"></div>
        </h5>
        <ul>
          <li>
            <div>学生人数:</div>
            <div>{{this.roominfo.stucount}}</div>
          </li>
          <li>
            <div>教师人数:</div>
            <div>{{this.roominfo.staffcount}}</div>
          </li>
          <li>
            <div>临时人员:</div>
            <div>{{this.roominfo.tempcount}}</div>
          </li>
          <li>
            <div>其他人员:</div>
            <div>0</div>
          </li>
        </ul>
      </div>
    </div>
    <syDialog
      :titleText="titleText"
      :dialogVisible="dialogShow"
      @beforeClose="dialogShow=false"
      dynamic
    ></syDialog>
  </div>
</template>

<script>
import { mapGetters } from "vuex";
import help from "@/views/common/help";
import syDialog from "./syDialog";
import echarts from "echarts";
export default {
  components: {
    syDialog,
    help
  },

  name: "syzhuangtai",
  props: {
    states1: Boolean, //服务器状态
    states2: Boolean, //网关状态
    states3: Boolean, //门锁状态
    states4: Boolean, //入住信息
    states5: Boolean //房间信息
  },
  //  [
  //   "states1", //服务器状态
  //   "states2", //网关状态
  //   "states3", //门锁状态
  //   "states4", //入住信息
  //   "states5", //房间信息
  // ],
  data() {
    return {
      myChart1: "",
      myChart2: "",
      myChart3: "",
      titleText: "",
      defaultData: {},
      getRoomtype2s: {},
      dialogShow: false,
      next: true,
      ortype: Number,
      modifyDefaultData: {},
      chartdata1: {
        on_line: 0,
        off_line: 0,
        total_line: 0
      }, //网关
      chartdata2: {
        on_line: 0,
        off_line: 0,
        total_line: 0
      }, //门锁
      chartdata3: {
        on_line: 0,
        off_line: 0,
        total_line: 0
      }, //指令服务器
      roominfo: {}
    };
  },
  created() {
    this.getRoomtype2s = this.getRoomtype2()();
  },
  watch: {
    states1(arr) {},
    states2(arr) {},
    states3(arr) {}
  },
  mounted() {
    this.getdeviceinfo();
    this.getroominfo();
    const that = this;
    window.onresize = () => {
      return (() => {
        window.screenWidth = window.innerWidth;
        console.log("window", window);
        // this.screenWidth = window.screenWidth
      })();
    };
  },
  activated() {
    this.getdeviceinfo();
    this.listener();
  },
  destroyed() {},
  methods: {
    ...mapGetters(["getRoomtype2"]),
    resizeListener(bool) {
      if (bool) {
        window.removeEventListener("resize", this.listener);
      } else {
        window.addEventListener("resize", this.listener);
      }
    },
    listener() {
      console.log("1", 1);
      if (this.next) {
        this.next = false;
        console.log("2", 2);

        setTimeout(() => {
          this.next = true;
          console.log("3", 3);

          if (this.myChart1) {
            this.myChart1.resize();
          }
          if (this.myChart2) {
            this.myChart2.resize();
          }
          if (this.myChart3) {
            this.myChart3.resize();
          }
        }, 500);
      }
    },
    //网关列表弹框
    onDetailed(ind) {
      if (ind === 1) {
        //网关明细
        this.titleText = "网关明细";
        this.dialogShow = true;
      } else {
        //门锁明细
        this.titleText = "门锁明细";
        this.dialogShow = true;
      }
    },
    //服务器状态点击事件
    toFwq() {
      this.$router.push({
        name: "设备管理",
        params: { name: "服务器" }
      });
    },
    //获取设备信息
    getdeviceinfo() {
      console.log("进入");
      this.$ajax("/login/home/3/getdeviceinfo", {})
        .then(res => {
          console.log("进入res", res);
          this.chartdata1 = {
            //网关数量
            on_line: res.result.gatewayzx * 1, //网关在线数量
            off_line: res.result.gatewaylx * 1, //网关离线数量
            total_line: res.result.gatewayzx * 1 + res.result.gatewaylx * 1 //网关总数
          };
          this.chartdata2 = {
            //房间数量
            on_line: res.result.roomzx * 1, //房间在线数量
            off_line: res.result.roomlx * 1, //房间离线数量
            total_line: res.result.roomzx * 1 + res.result.roomlx * 1 //房间总数
          };
          this.chartdata3 = {
            //服务器数量
            on_line: res.result.orderzx * 1, //指令服务器在线数量
            off_line: res.result.orderlx * 1, //指令服务器离线数量
            total_line: res.result.orderzx * 1 + res.result.orderlx * 1 //指令服务器总数
          };
          let dom = [];
          if (document.getElementById("id1") && this.states2) {
            dom.push(document.getElementById("id1"));
          } else {
            dom.push(null);
          }
          if (document.getElementById("id2") && this.states3) {
            dom.push(document.getElementById("id2"));
          } else {
            dom.push(null);
          }
          if (document.getElementById("id3") && this.states1) {
            dom.push(document.getElementById("id3"));
          } else {
            dom.push(null);
          }
          // setTimeout(() => {
          this.setEcharts(...dom);
          // }, 500);
        })
        .catch(err => {
          console.log(err);
        });
    },
    //根据登录用户获取入住/房间信息
    getroominfo() {
      this.$ajax("/login/home/4/getroominfo", {})
        .then(res => {
          this.roominfo = res.result; //房间整体数据
          this.roominfo.total =
            res.result.staffcount * 1 +
            res.result.stucount * 1 +
            res.result.tempcount * 1;
          this.roominfo.total1 =
            res.result.roomcount * 1 +
            res.result.classcount * 1 +
            res.result.labcount * 1 +
            res.result.othercount * 1;
        })
        .catch(err => {
          console.log(err);
        });
    },
    setEcharts(dom1, dom2, dom3) {
      console.log(
        "dom1,dom2,dom3",
        dom1,
        dom2,
        dom3,
        this.states1,
        this.states2,
        this.states3,
        (this.states1 && !dom3) ||
          (this.states3 && !dom2) ||
          (this.states2 && !dom1)
      );
      if (
        (this.states1 && !dom3) ||
        (this.states3 && !dom2) ||
        (this.states2 && !dom1)
      ) {
        setTimeout(() => {
          this.setEcharts(dom1, dom2, dom3);
        }, 100);
      }
      console.log("dom1,dom2,dom3", dom1, dom2, dom3);
      // 基于准备好的dom，初始化echarts实例

      var url1 =
        "data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAAEYAAABGCAYAAABxLuKEAAAE7UlEQVR4Xu2bXWgcZRSG3zO7M1tbm1RbQbHEUnfTCqKVWH8uJA0tgn+ISIuIVS/sblIt9kKwXrn2QqkUlFaS7uhNrQFpgijoheJPUaERUUORlmTGRqlaQYX+xu7M7ryySS3JdHdnJpsmE/zmcud853vPM++c+fLNRKCOqgREcalOQIGp4QwFRoGJ1jSUYy6lYzKbnVVSlsXzFiYHDu2Us9GuTePRK7ucNlKar7wsefDga/JP4xmBhh3TmnP2eeRjY2IEx0Cjwzblp+kQF5Qjn6fWe9zpJ/HQ2PSCozSMdnu3/Bo0Nuh8Q2Bac+5aj96nEycRkV6rYIyDusTHilzpwTLL70+aH1KwTKOz0akbA9PpPON53D1ZhHxvm0Zbo8LCjE9n3W2A94rvwnxpFYz2MOPrxTQEJpNztpDc5btig5Zp3NKosDDjW3PuCx69l33zf22Zxl1hxiswU6CkHFMDmgKjwES7n5RjlGOUY9TjWq1jatwFCowCE61BKscoxyjHRCOgHBONl+oxyjHKMdEIKMdE46V6jHLMHHZMW5Y6gPmVEk6j9JQHb6fv9cUPTdQ7opU4teiTUnoW9F7yvyVogn7/+d/c70wZnUr20Dt46S1sEsfpJeUegImpTDYbY0QwJJq2abhH/yrK/KHAjL8KdT8huTZK8vjEyolEQr9jqEeGwmoKBSbTWXqYXrk/bNI4xomg3yqk1ofVFg5MzvmG5G1hk8YyTsTToa88UhArjL5AMOkutx1l70CYZHGPERHTKhi5MDoDwWRyxY9I3OtPJpp0plL6pC8Nwkw4UzHFc+52klnfE7OoJ/Rlh7vljyAddcHc0Fm80fXkEEBf3Mx90RBUQK3zmS4uZ9m1/dpFsMMqpLYF5a0LJp1z9oJ8/GK3JB6w9iQ/DEo+2+fTOecLkGsm65CTSOkt9m45VU9fTTDpLVwqRfcoMbagu3AIMGKZqeWzXXSY+at9plIZJ5r2vLVHf3VqYLLFyqNtf7XBAhmEwAkjbpZjrie5uIqGPttMbZh2MLNc7HRMr8DUoKjAKDDRbjDlGOUY5ZhoBOaGYwQfgNqACJIg1xH0f6g8LEAfoJ2EMA3gCZKp/4oTkSKAvaDYEPDiotkC4kmCCwPwxanHaHnb1CdtQ078PwQBjjTBuHXiVqT/k3xNtHXDBf2zekW35pybSXzrX7H7xsQHzLyk0fJjtxybKHBF1u0ow/t87DfRXrQL+nZ/0els8WcA1wH4xTZTy8LcSJmsM0Dw9jqx8QGDhNxp9xgDE8W2djobPY9vj4ORN+2CMWmbYE2e83477v5J8nIROXPtNfpVB/Jyrh6cyjbsO787R8/DrBUaHzCVv6/0pL7+cLfYFbWtm53VLPE9AkvHuUhJhBsfvdrYn8+Lt2orF50ddXsIPnKhx0DeXTBf7xp8XU5Uq/im57hg9LS7A+TTc6jHjEsVkb9JJAE2VxcvoxCcAbAEpHZRjIgH4C+wWvPFkpBvMOLjmDC9YQZjFJi5sY6ZQUvMuR4TEzaN3Eru3YD3cUwKmWYZ8pZtGpvqJa2551t5XJ4ZdUcALppmVXFIt8E2U31TAlMZlMmW7qN4+0BeEYdqGtcgFMEuq2BsDcoV+MKtLcvmU4nSapa9OQ0nIQkHeuLQ0BsyEgRlbL0VJuj/GKPA1LjqCowCE60hKMcox0RzzL+FbzV0a40dhwAAAABJRU5ErkJggg==";
      var url2 =
        "data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAAEgAAABICAYAAABV7bNHAAAEcklEQVR4Xu2bQWwUZRTH/292dnalSwp6sYgosNZKsKhFQEwUIWIlhKiH4jbKxQPxqIlRE3tADxKIcEBREePBxC1FooBpQiDpyWgCeGks7bIixki46FpKaTszO88MZWuhuzsz++1sv5Zvz+993//9vv97385kl6A+ZQmQ4lOegALk4RAFSAESGyLKQcpBykFiBJSDxPipGaQcVAMHLevihJU33wPTM0y8SGzL6c8mIA9QPwiHM1ujB4iIS6nybLGHf+D5o0PmaWYsnf7SQlBAOJxNxdoqBtSYNg86zK+FIE2aJTUNqczLsc5igjwd9MA3Y5cYaJCmmjCEEH2dTRnbAgNqOc5zBofM4TA0ybUm/ZRtN9YGBtR8guuu/W1elauY6qshop/Pp4wnFKASbBUgry+DykEebw0VIAVIaHKrGXS7zaB4BJhnAJdHhIwzkTyrHNS6ENizZvwB4MhFoONMyedM3/RmDaBXlgJvNhPmxqPXi7csC08eY+RM3yyKBs4KQKklwFsr/ofjVjo0aqHlO4aoh2Y8oLYlhHdWYMI5Bfd88AsjfUHMPW72jAb00mJCxyNA4kZbFZzz2TnGgX5xODMa0Jb7CDseCxeOlICS9YQ/hhiWU9oBmxcR3m+5ua3cmfNpH+OLgeo4p7CKNC12/1yg+znCVRv4/iKwt5cxkp9abOtCwoePT3VOGHCkctBXTxHW3K1Bj0QwbOaRHXTwas/NkJ69B9i1iqbMnP19jINVdo50Dtq3lvB0A+EOQ7+ubdi0kR3kCUjrFwAfra4tHKkcpBPQ3UpYkNAQ0yMTkH4bZHzcx9gzDXCkAuSKmW8AhzYQGuo0xKPjkK6ZNkZsxl1zxr8hF67yMNtq8uSTZkgXRBWDNFmwe1t98ivjy0x1b6tSq0kHyBXqPo133eKkgnNqCUe6Fpt8ii6kQ+sJDQkNcV3Dv6M2Pu+rnXOku8WKWdyF1PEoMC9G6P4TOPK76KNn8LaUssWClxFehgLkwVYBUoDE2k85SDlIOUiMgHKQGL+KZ9C6Htb/umwNM7MhJkHubCI6eT5lbCym0vMneMm0eRrMK+UuUUydBuzMtMferQjQg2l7S57zR8UkyJxNuQhFlw+k6FJFgNykZKf5OjnYzeA6mUsNqo2AC1pE2zawNfpjyVchfhdd1sV35m17FRPfywTP1vS7LjGaHOY3ysWTRtv9rucnjhl5HXTOrtfPZjfRWNm9/SwYZkxj2trgsHOq3B7Z9ljVDiRoLdO2cUGoAuRxZAoQgMZvucmxrOdBFLuVl8ac9Pyrg6aVuII5F09Eu3o3Uy5o6/iND73FHuocW24znWHmKXD8iiwbR8ig3mj2GraV7hU6oGTaehvs7KxUoJ88XaeV/W3GWT+xQWNCB9SUttbZ7PQEFeY3noj+4fro4uwmuuI3J0hc6IBcMY1p+0WHnRdAqGqbEZCLRHh/f1usN0jRQWJrAiiIINliFSCPE1GAFCCxplUOUg5SDhIjoBwkxk/NIOUg5SAxAh7Z/wGRjmBnC3YhrwAAAABJRU5ErkJggg==";
      var url3 =
        "data:image/png;base64,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";

      if (dom1) {
        this.myChart1 = echarts.init(dom1);
        this.myChart1.setOption({
          //网关图表渲染
          grid: {
            top: 50,
            left: 50
          },
          color: ["rgba(176, 212, 251, 1)"],
          // tooltip: {
          //   trigger: "item",
          //   formatter: "{a} <br/>{b}: {c} ({d}%)"
          // },
          graphic: {
            elements: [
              {
                type: "image",
                style: {
                  image: url1,
                  width: 30,
                  height: 30
                },
                left: "center",
                top: "center"
              }
            ]
          },
          series: [
            {
              name: "网关状态",
              type: "pie",
              clockWise: false,
              // hoverAnimation:false,
              radius: ["38%", "58%"],
              hoverAnimation: false,
              hover: false,
              itemStyle: {
                normal: {
                  label: {
                    show: false
                  },
                  labelLine: {
                    show: false
                  }
                }
              },
              avoidLabelOverlap: false,
              label: {
                normal: {
                  show: false,
                  position: "center"
                },
                emphasis: {
                  show: false,
                  textStyle: {
                    fontSize: "16",
                    fontWeight: "bold"
                  }
                }
              },
              labelLine: {
                normal: {
                  show: false
                }
              },
              data: [
                {
                  value: this.chartdata1.on_line,
                  name: `在线数量`,
                  itemStyle: {
                    normal: {
                      color: {
                        // 完成的圆环的颜色
                        colorStops: [
                          {
                            offset: 0,
                            color: "#2466F9" // 0% 处的颜色
                          },
                          {
                            offset: 1,
                            color: "#2466F9" // 100% 处的颜色
                          }
                        ]
                      },
                      label: {
                        show: false
                      },
                      labelLine: {
                        show: false
                      }
                    }
                  }
                },
                {
                  value: this.chartdata1.off_line,
                  name: `离线数量`,
                  itemStyle: {
                    normal: {
                      color: {
                        // 完成的圆环的颜色
                        colorStops: [
                          {
                            offset: 0,
                            color: "#BDD1FD" // 0% 处的颜色
                          },
                          {
                            offset: 1,
                            color: "#BDD1FD" // 100% 处的颜色
                          }
                        ]
                      },
                      label: {
                        show: false
                      },
                      labelLine: {
                        show: false
                      }
                    }
                  }
                }
              ]
            }
          ]
        });
      }
      if (dom2) {
        this.myChart2 = echarts.init(dom2);
        this.myChart2.setOption({
          //房间图表渲染
          grid: {
            top: 50,
            left: 50
          },
          color: ["rgba(176, 212, 251, 1)"],
          // tooltip: {
          //   trigger: "item",
          //   formatter: "{a} <br/>{b}: {c} ({d}%)"
          // },
          graphic: {
            elements: [
              {
                type: "image",
                style: {
                  image: url3,
                  width: 30,
                  height: 30
                },
                left: "center",
                top: "center"
              }
            ]
          },
          series: [
            {
              name: "门锁状态",
              type: "pie",
              clockWise: false,
              radius: ["38%", "58%"],
              hover: false,
              hoverAnimation: false,
              itemStyle: {
                normal: {
                  label: {
                    show: false
                  },
                  labelLine: {
                    show: false
                  }
                }
              },
              avoidLabelOverlap: false,
              label: {
                normal: {
                  show: false,
                  position: "center"
                },
                emphasis: {
                  show: false,
                  textStyle: {
                    fontSize: "16",
                    fontWeight: "bold"
                  }
                }
              },
              labelLine: {
                normal: {
                  show: false
                }
              },
              data: [
                {
                  value: this.chartdata2.on_line,
                  name: `在线数量`,
                  itemStyle: {
                    normal: {
                      color: {
                        // 完成的圆环的颜色
                        colorStops: [
                          {
                            offset: 0,
                            color: "#52C896" // 0% 处的颜色
                          },
                          {
                            offset: 1,
                            color: "#52C896" // 100% 处的颜色
                          }
                        ]
                      },
                      label: {
                        show: false
                      },
                      labelLine: {
                        show: false
                      }
                    }
                  }
                },
                {
                  value: this.chartdata2.off_line,
                  name: `离线数量`,
                  itemStyle: {
                    normal: {
                      color: {
                        // 完成的圆环的颜色
                        colorStops: [
                          {
                            offset: 0,
                            color: "#BAE9D5" // 0% 处的颜色
                          },
                          {
                            offset: 1,
                            color: "#BAE9D5" // 100% 处的颜色
                          }
                        ]
                      },
                      label: {
                        show: false
                      },
                      labelLine: {
                        show: false
                      }
                    }
                  }
                }
              ]
            }
          ]
        });
      }
      if (dom3) {
        this.myChart3 = echarts.init(dom3);
        this.myChart3.setOption({
          //服务器图表渲染
          grid: {
            containLabel: true,
            top: 35,
            left: 25,
            right: 20
          },
          color: ["rgba(176, 212, 251, 1)"],
          // tooltip: {
          //   trigger: "item",
          //   formatter: "{a} <br/>{b}: {c} ({d}%)"
          // },
          graphic: {
            elements: [
              {
                type: "image",
                style: {
                  image: url2,
                  width: 30,
                  height: 30
                },
                left: "center",
                top: "center"
              }
            ]
          },
          series: [
            {
              name: "服务器状态",
              type: "pie",
              clockWise: false,
              radius: ["38%", "58%"],
              hover: false,
              hoverAnimation: false,
              itemStyle: {
                normal: {
                  label: {
                    // show: false
                  },
                  labelLine: {
                    // show: false
                  }
                }
              },
              avoidLabelOverlap: false,
              label: {
                normal: {
                  show: false,
                  position: "center"
                },
                emphasis: {
                  show: false,
                  textStyle: {
                    fontSize: "16",
                    fontWeight: "bold"
                  }
                }
              },
              labelLine: {
                normal: {
                  show: false
                }
              },
              data: [
                {
                  value: this.chartdata3.off_line,
                  name: `离线数量`,
                  itemStyle: {
                    normal: {
                      color: {
                        // 完成的圆环的颜色
                        colorStops: [
                          {
                            offset: 0,
                            color: "#BDE4FD" // 0% 处的颜色
                          },
                          {
                            offset: 1,
                            color: "#BDE4FD" // 100% 处的颜色
                          }
                        ]
                      },
                      label: {
                        show: false
                      },
                      labelLine: {
                        show: false
                      }
                    }
                  }
                },
                {
                  value: this.chartdata3.on_line,
                  name: `在线数量`,
                  itemStyle: {
                    normal: {
                      color: {
                        // 完成的圆环的颜色
                        colorStops: [
                          {
                            offset: 0,
                            color: "#24A6F9" // 0% 处的颜色
                          },
                          {
                            offset: 1,
                            color: "#24A6F9" // 100% 处的颜色
                          }
                        ]
                      },
                      label: {
                        show: false
                      },
                      labelLine: {
                        show: false
                      }
                    }
                  }
                }
              ]
            }
          ]
        });
      }
    }
  }
};
</script>
