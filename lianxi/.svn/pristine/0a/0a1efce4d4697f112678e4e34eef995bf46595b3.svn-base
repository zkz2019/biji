<!-- 批量指令详情 -门禁 -->
<template>
  <fel-dialog
    title="批量指令详情"
    width="70%"
    append-to-body
    minWidth="1050px"
    :before-close="beforeClose"
    :visible.sync="dialogVisible"
  >
    <el-container class="mjhistory">
      <paging-table
        interface="/access/v2.0/door/c/listAccessOrderDetails"
        class="mjhistory_table"
        :list="list"
        ajaxType="9"
        :param="{aoid:this.paramObj.aoid}"
        :refresh="refresh"
        :noOpera="true"
      ></paging-table>
    </el-container>
  </fel-dialog>
</template>

<script>
export default {
  props: {
    // checkedroom: Object,
    paramObj: Object,
    dialogVisible: Boolean
  },
  data() {
    let $this = this;
    return {
      refresh: 0,
      list: [
        {
          name: "序号",
          type: "$index",
          width: "50px"
        },
        {
          name: "门名称",
          prop: "adname"
        },
        {
          name: "位置",
          prop: "aglocation"
        },
        {
          name: "主控板唯一ID",
          prop: "amcode"
        },
        {
          name: "主控板名称",
          prop: "amname"
        },
        {
          name: "指令创建日期",
          prop: "aodcdate"
        },
        {
          name: "指令结束日期",
          prop: "aodedate"
        },
        {
          name: "指令开始日期",
          prop: "aodsdate"
        },
        {
          name: "指令详情ID",
          prop: "aodid"
        },
        {
          name: "处理状态",
          width: "80px",
          template: {
            props: ["scope"],
            methods: {
              getClass() {
                let value = this.scope.row.aodstatus;
                if (value == "处理成功") {
                  return "puc-pg";
                } else if (value == "处理失败") {
                  return "puc-px";
                } else {
                  return "";
                }
              }
            },
            template: `<span :class='getClass()'>{{scope.row.aodstatus}}</span>`
          }
        },
        {
          name: "下发状态",
          template: {
            props: ["scope"],
            methods: {
              getClass() {
                let value = this.scope.row.aodstate;
                if (value == "下发成功") {
                  return "puc-pg";
                } else if (value == "下发失败") {
                  return "puc-px";
                } else {
                  return "";
                }
              }
            },
            template: `<span :class='getClass()'>{{scope.row.aodstate}}</span>`
          }
        },
        {
          name: "备注",
          prop: "aodremark"
        }
      ]
    };
  },
  computed: {},
  created() {
    console.log("111111111111", 111111111111);
  },
  watch: {
    dialogVisible(val) {
      console.log("val", val);
      if (val) {
        this.onRefresh();
      }
    }
  },
  methods: {
    onClick(obj) {
      console.log("id,obj", obj);
    },
    beforeClose() {
      this.$emit("beforeClose");
    },
    onRefresh() {
      //刷新表格
      this.refresh = new Date().getTime();
    }
  }
};
</script>

<style lang="scss">
.mjhistory {
  height: 100%;
  .mjhistory_table {
    height: 400px;
  }
}
</style>

