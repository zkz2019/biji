<!-- 卡务中心 -->
<template>
  <fel-left-tabs :options="options" :paramId="paramId" :params="params"></fel-left-tabs>
</template>

<script>
import { mapActions } from "vuex";
export default {
  name: "kwzx382",
  data() {
    return {
      options: [],
      paramId: "",
      params: {},
      next: false
    };
  },
  methods: {
    ...mapActions(["getmenu"]),
    setParamId(obj) {
      if (this.next) {
        this.paramId = "批量授权";
        this.params = obj;
      } else {
        setTimeout(() => {
          this.setParamId(obj);
        }, 200);
      }
    }
  },
  created() {
    this.getmenu().then(data => {
      let arr = data["kwzx382"];
      if (arr) {
        this.options = arr.map(({ entity }) => {
          return {
            name: entity.alias,
            obj: entity,
            current: () => import("./" + entity.value) || ""
          };
        });
        this.next=true;
      }
    });
  },
  activated() {
    let obj = this.$route.params;
    console.log("obj", obj);
    if (obj && obj.in && obj.in == "renyuan") {
      this.setParamId(obj);
    }
  },
  beforeDestroy() {
    this.next = false;
  }
};
</script>

